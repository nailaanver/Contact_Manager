{% extends 'master.html' %}
{% load static %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
 <header>
        <div class="logosec">
            <div class="logo">Admin Dashboard</div>
            <h2 class="welcome-admin">Welcome, {{ user.username }}</h2>
            <!-- <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210182541/Untitled-design-(30).png"
                class="icn menuicn" id="menuicn" alt="menu-icon" /> -->
        </div>
        <div class="searchbar">
            <input type="text" placeholder="Search" />
            <div class="searchbtn">

            </div>
        </div>

        <div class="message">
            <div class="circle"></div>
            <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183322/8.png" class="icn" alt="" />
            <div class="dp">
                <img src="https://media.geeksforgeeks.org/wp-content/uploads/20221210180014/profile-removebg-preview.png"
                    class="dpicn" alt="dp" />
            </div>
        </div>
    </header>

    <div class="main-container">
        <div class="navcontainer">
            <nav class="nav">
                <div class="nav-upper-options">
                    <div class="nav-option option1" data-page="{% url 'dashboard_content' %}">
                        <i class="fas fa-tachometer-alt"></i>
                        <h3>Dashboard</h3>
                    </div>

                    <div class="option2 nav-option" data-page="{% url 'manage_users' %}">
                        <i class="fas fa-user-cog"></i>
                        <h3>Manage Users</h3>
                    </div>

                    <div class="nav-option option3" data-page="{% url 'manage_contact' %}">
                        <i class="fa fa-users"></i>
                        <h3>Manage Contact</h3>
                    </div> 

                    <div class="nav-option logout">
                        <i class="fa fa-sign-out-alt"></i>
                        <h3>Logout</h3>
                    </div>
                </div>
            </nav>
        </div>
        <div class="main" id="main-content">

            </div>
        
    <!-- <script>

        //index.js

            let menuicn = document.querySelector(".menuicn");
            let nav = document.querySelector(".navcontainer");

            menuicn.addEventListener("click", () => {
                nav.classList.toggle("navclose");
            })

    </script> -->


<script>
document.addEventListener('DOMContentLoaded', function() {
    const mainContent = document.getElementById('main-content');

    // 1️⃣ Load Dashboard content by default on page load
    const defaultPageUrl = "{% url 'dashboard_content' %}";
    fetch(defaultPageUrl)
        .then(response => {
            if (!response.ok) throw new Error('Failed to load dashboard content');
            return response.text();
        })
        .then(html => {
            mainContent.innerHTML = html;
        })
        .catch(err => console.error('Error loading default content:', err));

    // 2️⃣ Handle sidebar clicks
    document.querySelectorAll('.nav-option').forEach(item => {
        item.addEventListener('click', function() {
            const pageUrl = this.getAttribute('data-page');
            if (!pageUrl) return; // Skip if no URL

            fetch(pageUrl)
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.text();
                })
                .then(html => {
                    mainContent.innerHTML = html;
                })
                .catch(err => console.error('Error loading page:', err));
        });
    });
});
</script>





{% endblock %}
